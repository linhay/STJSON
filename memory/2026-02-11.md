## JSONLines 逐行读取接口
- 决策：为 `JSONLines` 增加逐行回调接口，避免 `components(separatedBy:)` 产生整批中间数组，缓解大输入下额外内存压力。
- 实现：新增 `forEachLine(_:_:)`（`JSON`）与 `forEachLine(_:decoder:_:)`（`Decodable`）接口；内部改为逐字符扫描并按行回调。
- 测试：新增 `JSONLinesTests` 两个场景（JSON 回调、Decodable 回调），并验证通过。
- 门禁修复：`Package.swift` 为 `SwiftJSONTests` 增加 `resources: [.process("Resources")]` 与 `STJSON` 依赖，确保测试目标可编译。
- 风险：全量测试仍有历史问题（`BaseTests` 继续依赖 `NSDataAsset` 导致资源加载失败），本次未扩展修复范围。
## 全量 swift test 门禁修复
- 决策：将 `SwiftJSONTests` 的资源读取从 `NSDataAsset` 迁移到 `Bundle.module` 文件读取，提升 SwiftPM 命令行测试稳定性。
- 实现：新增 `Tests/SwiftJSONTests/TestFixtureLoader.swift`，统一读取 `Tests.json/jsonlines.jsonl`（含 `data.xcassets/*.dataset` 回退路径）。
- 替换：更新 `BaseTests`、`PerformanceTests`、`SequenceTypeTests` 三处测试入口加载逻辑。
- 验证：`swift test` 全量通过（151 tests, 0 failures）。
## JSONLines Collection 能力
- 决策：为 `JSONLines` 增加 `LineCollection: Collection`，提供惰性按行视图，支持 `count/map/prefix/dropFirst/distance/index` 等标准集合能力。
- API：新增 `JSONLines.lines(_:) -> LineCollection`；空行会被跳过，换行符支持 `\n` 与 `\r`。
- 兼容：`decode` 与 `forEachLine` 内部改为复用 `LineCollection`，保持对外行为一致。
- 测试：新增 `JSONLinesTests` 的 Collection 场景与 map 场景；全量 `swift test` 通过（153 tests, 0 failures）。
## skills 同步更新（JSONLines Collection）
- 决策：当 STJSON API 扩展为流式/Collection 能力时，技能配置必须同步更新，避免技能提示滞后于代码能力。
- 更新：`skills/stjson/SKILL.md` 增加 `forEachLine` 与 `lines(_:)` 触发语义；`skills/stjson/references/usage.md` 增加 streaming 与 Collection 示例。
- 规范：`skills/CONFIGURATION_GUIDE.md` 新增“API 能力升级需同步 SKILL + references”的维护约束。
- 验证：执行 /skills TDD 清单 3 条检查，结果全部通过。
## JSONLines 新增 Data/URL 输入 API
- 结论：`String` 输入不是源头流式，仍需先把完整内容加载进内存。
- 变更：为 `JSONLines` 增加 `Data` 与 `URL` 入口；其中 `URL` 采用 `FileHandle` 分块读取并增量切行，降低峰值内存。
- 测试：新增 `testForEachLineDataJSON` 与 `testForEachLineFileURLJSON`，并通过全量测试（155 tests）。
## JSONLines Data/URL 与 AsyncSequence API
- 决策：补齐 `Data` / `URL` 输入，避免 `String` 入口导致源头整块加载。
- 实现：新增 `decode(_ data:)`、`forEachLine(_ data:)`、`forEachLine(url:)`，`URL` 采用 `FileHandle` 分块读取。
- 异步扩展：新增 `AsyncLineSequence`、`asyncLines(url:)`、`forEachLineAsync(url:)`（JSON 与 Decodable）。
- 测试：新增 4 个 JSONLinesTests 场景（Data、URL、async sequence、async decodable）并通过全量 `swift test`（157 tests）。
## JSONLines 错误处理策略统一为 compactMap
- 决策：不内置 `skipInvalid` 与 `collectErrors` 两套策略，统一暴露 `compactMapLines`（含行号）让调用方在闭包内决定跳过/记录错误。
- API：新增 `compactMapLines`（string/data/url）与 `compactMapLinesAsync(url:)`。
- 行号：按非空逻辑行从 1 递增，便于外部收集坏行位置。
- 测试：新增 `testCompactMapLinesCanSkipInvalid`、`testCompactMapLinesCanCollectErrors`，并通过全量 `swift test`（159 tests）。
## JSONLines 对外接口精简
- 决策：收敛为统一输入源 `JSONLines.Source`（`.string` / `.data` / `.url`），减少重载数量。
- 新公共入口：`decode(from:)`、`forEachLine(from:)`、`compactMapLines(from:)`；异步仍保留 `asyncLines(url:)` 与 `forEachLineAsync(url:)`。
- 兼容影响：测试与技能示例已切换到 `from:` 形式，公共 API 语义更统一。
- 验证：`JSONLinesTests` 通过，包含 strict / compactMap / data / url / async 场景。
